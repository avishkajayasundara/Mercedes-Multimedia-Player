(this.webpackJsonpfire_client=this.webpackJsonpfire_client||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(4),c=n(0),o=n.n(c),r=n(21),s=n.n(r),i=(n(62),n.p,n(63),n(64),n(15)),l=n.n(i),u=n(34),d=n(28),b=n(9),j=n(18),g=n(23),O=n(52),p=n(8),f="SET_AUTHENTICATED",h="SET_UNAUTHENTICATED",m="SET_USER",v="LOADING_USER",x="SET_ERRORS",y="LOADING_UI",S="CLEAR_ERRORS",I="STOP_LOADING_UI",k={authenticated:!1,credentials:{},loading:!1},E={loading:!1,errors:null},w=[O.a],U=Object(g.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(p.a)(Object(p.a)({},e),{},{authenticated:!0});case h:return k;case m:return Object(p.a)({authenticated:!0,loading:!1},t.payload);case v:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,errors:t.payload});case S:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,errors:null,rent_errors:null});case y:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case I:return Object(p.a)(Object(p.a)({},e),{},{loading:!1});default:return e}}}),N=Object(g.e)(U,{},Object(g.d)(g.a.apply(void 0,w))),T=n(26),A=n.n(T),C=n(37),L=function(){return function(e){localStorage.removeItem("token"),delete l.a.defaults.headers.common.Authorization,e({type:h})}},R=function(){return function(){var e=Object(C.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v}),e.prev=1,e.next=4,l.a.get("/logged-room");case 4:return n=e.sent,t({type:m,payload:n.data.room}),e.abrupt("return",n.data);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},_=function(e){var t="Bearer ".concat(e);localStorage.setItem("token",t),l.a.defaults.headers.common.Authorization=t},D=n(17),F=n(53),z=n.n(F),B=n(38);n(95);B.a.initializeApp({apiKey:"AIzaSyCgE4iQJUFyVCuB_BVST-wwbzxgSwG0vZc",authDomain:"starthack-796b2.firebaseapp.com",projectId:"starthack-796b2",storageBucket:"starthack-796b2.appspot.com",messagingSenderId:"649713416037",appId:"1:649713416037:web:ae2f1fc55d56de1321538c",measurementId:"G-D1KGJJCMRL"});var G=B.a.messaging(),M=(n(88),n(89),n(99)),P=(n(90),n.p+"static/media/1.62c42d2c.jpg");function H(){return Object(a.jsxs)(M.a,{fade:!0,interval:3e3,children:[Object(a.jsx)(M.a.Item,{children:Object(a.jsx)("img",{className:"d-block w-100 image",src:P,alt:"First slide"})}),Object(a.jsx)(M.a.Item,{children:Object(a.jsx)("img",{className:"d-block w-100 image",src:"https://i.pinimg.com/originals/7d/36/6c/7d366c1ee7625c7873db32107265ec47.jpg",alt:"Second slide"})}),Object(a.jsx)(M.a.Item,{children:Object(a.jsx)("img",{className:"d-block w-100 image",src:"https://wallpaperaccess.com/full/195879.jpg",alt:"Third slide"})})]})}var J=n(97);var V={logoutUser:L},K=Object(j.b)((function(e){return{}}),V)((function(e){var t=Object(c.useState)(!1),n=Object(D.a)(t,2),o=(n[0],n[1]),r=Object(c.useState)(0),s=Object(D.a)(r,2),i=s[0],u=s[1],d=Object(c.useState)(null),b=Object(D.a)(d,2),j=b[0],g=b[1],O=Object(c.useState)(null),p=Object(D.a)(O,2),f=p[0],h=p[1],m=Object(c.useState)(!1),v=Object(D.a)(m,2),x=(v[0],v[1]),y=Object(c.useState)(""),S=Object(D.a)(y,2),I=S[0],k=S[1],E=Object(c.useState)(1),w=Object(D.a)(E,2),U=w[0],N=w[1];return Object(c.useEffect)((function(){!function(e){G.getToken({vapidKey:"BKbe0GFVhnvWtMstQmIL0th5kyd2cF7Ezua06l2ga0163TIOa87Z9i844R-TOgMbwA7wHM8RHnD51l1U051bCqY"}).then((function(t){if(t)return console.log("current token for client: ",t),e(!0),t;console.log("No registration token available. Request permission to generate one."),e(!1)})).then((function(e){var t=l.a.post("/room-token",{token:e});console.log("result",t)})).catch((function(e){console.log("An error occurred while retrieving token. ",e)}))}(x)}),[]),Object(c.useEffect)((function(){if(j)switch(console.log("notification",j),j.action){case"PLAYLIST":l.a.get("/playlist/".concat(j.body)).then((function(e){u(0),h(e.data.playlist)}));break;case"VOLUME":console.log(j.body),console.log(parseFloat(j.body)),N(parseFloat(j.body))}}),[j]),Object(c.useEffect)((function(){f&&f.songs.length>0&&(console.log(f.songs[0]),k(f.songs[0].url))}),[f]),Object(c.useEffect)((function(){console.log(i),f&&i>0&&(console.log(f,f.songs.length,i),f.songs.length>0&&f.songs.length>=i&&null!=f.songs[i]&&k(f.songs[i].url))}),[i]),new Promise((function(e){G.onMessage((function(t){e(t)}))})).then((function(e){o(!0),g({action:e.data.action,body:e.data.body})})).catch((function(e){return console.log("failed: ",e)})),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(H,{}),Object(a.jsx)(z.a,{src:I,controls:!0,autoPlay:!0,style:{marginTop:20},onEnded:function(){console.log("on ended"),u(i+1)},volume:U,onVolumeChanged:function(e){N(e.srcElement.volume)},className:"player-app"}),Object(a.jsx)(J.a,{variant:"dark",className:"logout",size:"lg",onClick:function(){e.logoutUser()},children:"Logout"})]})})),q=n(98),Q=n(100),Y=n(101);n(91);var Z={loginUser:function(e,t){return function(){var n=Object(C.a)(A.a.mark((function n(a){var c,o;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:y}),n.prev=1,n.next=4,l.a.post("/room-login",e);case 4:return c=n.sent,_(c.data.token),n.next=8,a(R());case 8:n.sent,a({type:S}),t.push("/"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),a({type:x,payload:null===(o=n.t0.response)||void 0===o?void 0:o.data});case 16:case"end":return n.stop()}}),n,null,[[1,13]])})));return function(e){return n.apply(this,arguments)}}()}},W=Object(j.b)((function(e){return{user:e.user,UI:e.UI}}),Z)((function(e){var t=Object(c.useState)(""),n=Object(D.a)(t,2),o=n[0],r=n[1],s=Object(c.useState)({}),i=Object(D.a)(s,2),l=i[0],u=i[1],d=e.UI.loading;return Object(c.useEffect)((function(){e.UI.errors&&u(e.UI.errors)}),[e.UI.errors]),Object(a.jsx)("div",{className:"flex flex-1 flex-col background",style:{minHeight:"100vH"},children:Object(a.jsxs)(q.a,{children:[Object(a.jsx)("h1",{className:"title",children:"MERCEDES"}),Object(a.jsx)(Q.a,{onSubmit:function(t){t.preventDefault();var n={accessCode:o};e.loginUser(n,e.history)},children:Object(a.jsx)(Y.a,{children:Object(a.jsxs)(Q.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(Q.a.Label,{className:"label",children:" Access Code "}),Object(a.jsx)(Q.a.Control,{type:"password",className:l.error?"form is-invalid":"form",value:o,onChange:function(e){return r(e.target.value)},required:!0}),Object(a.jsx)("p",{className:"error-text",hidden:!l.error,children:l.error}),Object(a.jsx)(J.a,{variant:"secondary",size:"lg",type:"submit",className:"submit-button",disabled:d,children:d?"Logging in...":"Login"})]})})})]})})})),X=n(29),$=Object(j.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,n=e.authenticated,c=Object(X.a)(e,["component","authenticated"]);return Object(a.jsx)(b.b,Object(p.a)(Object(p.a)({},c),{},{render:function(e){return!0===n?Object(a.jsx)(b.a,{to:"/"}):Object(a.jsx)(t,Object(p.a)({},e))}}))})),ee=Object(j.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,n=e.authenticated,c=(e.role,Object(X.a)(e,["component","authenticated","role"]));return Object(a.jsx)(b.b,Object(p.a)(Object(p.a)({},c),{},{render:function(e){return n?Object(a.jsx)(t,Object(p.a)({},e)):Object(a.jsx)(b.a,{to:"/login"})}}))}));l.a.defaults.baseURL="https://smarthack.herokuapp.com";var te=localStorage.token;te&&(1e3*Object(u.a)(te).exp<Date.now()?(N.dispatch(L()),window.location.href="/login"):(N.dispatch({type:f}),l.a.defaults.headers.common.Authorization=te,N.dispatch(R())));var ne=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(c.Fragment,{children:Object(a.jsx)(j.a,{store:N,children:Object(a.jsx)(d.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(ee,{exact:!0,path:"/",component:K}),Object(a.jsx)($,{exact:!0,path:"/login",component:W})]})})})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[94,1,2]]]);
//# sourceMappingURL=main.efbe71cd.chunk.js.map